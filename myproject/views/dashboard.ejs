<!DOCTYPE html>
<html>
<head>
  <title>Deals Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    h1 {
      margin-bottom: 20px;
    }

    table {
      border-collapse: collapse;
      width: 100%;
    }

    th, td {
      padding: 10px 14px;
      border: 1px solid #ccc;
      text-align: left;
    }

    th {
      background-color: #f8f8f8;
    }

    button {
      padding: 6px 12px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    button:hover {
      background-color: #45a049;
    }

    .file-link {
      margin-bottom: 6px;
    }
  </style>
</head>
<body>
  <h1>Deals Dashboard</h1>

  <table>
    <thead>
      <tr>
        <th>User ID</th>
        <th>Writer ID</th>
        <th>Pages</th>
        <th>Total Price</th>
        <th>Status</th>
        <th>File(s)</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% deals.forEach(deal => { %>
        <tr>
          <td><%= deal.userId %></td>
          <td><%= deal.writerId %></td>
          <td><%= deal.pages %></td>
          <td><%= deal.totalPrice %></td>
          <td><%= deal.status %></td>

          <!-- Show file labels -->
          <td>
            <% if (deal.signedLinks && deal.signedLinks.length > 0) { %>
              <% deal.signedLinks.forEach((link, idx) => { %>
                <div class="file-link">File <%= idx + 1 %></div>
              <% }) %>
            <% } else { %>
              No files
            <% } %>
          </td>

          <!-- Download buttons -->
          <td>
            <% if (deal.signedLinks && deal.signedLinks.length > 0) { %>
              <% deal.signedLinks.forEach((link, idx) => { %>
                <div class="file-link">
                  <a href="<%= link %>" target="_blank" download>
                    <button>Download File <%= idx + 1 %></button>
                  </a>
                </div>
              <% }) %>
            <% } else { %>
              -
            <% } %>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</body>
</html>
