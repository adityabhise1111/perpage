<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - PerPage | Premium Academic Assignment Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Advanced Animations */
        .fade-in {
            opacity: 0;
            animation: fadeIn 1.2s ease-out forwards;
        }
        
        .slide-up {
            opacity: 0;
            transform: translateY(30px);
            animation: slideUp 1s ease-out forwards;
        }
        
        .slide-left {
            opacity: 0;
            transform: translateX(-30px);
            animation: slideLeft 1s ease-out forwards;
        }
        
        .slide-right {
            opacity: 0;
            transform: translateX(30px);
            animation: slideRight 1s ease-out forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideLeft {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes slideRight {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        /* Enhanced Gradients */
        .gradient-text {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 50%, #06b6d4 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            background-size: 200% 200%;
            animation: gradientShift 3s ease-in-out infinite;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .bg-gradient-animated {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #2d2d2d 100%);
            background-size: 400% 400%;
            animation: gradientMove 15s ease infinite;
        }
        
        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* Advanced Hover Effects */
        .hover-scale {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .hover-scale:hover {
            transform: scale(1.02) translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.15);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn-primary:hover::before {
            left: 100%;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }
        
        /* Navigation Enhancements */
        .nav-link {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            transition: width 0.3s ease;
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .nav-link:hover {
            color: #60a5fa !important;
        }
        
        /* Logo Animation */
        .logo-container {
            transition: all 0.3s ease;
        }
        
        .logo-container:hover {
            transform: scale(1.1);
        }
        
        .logo-icon {
            transition: all 0.3s ease;
        }
        
        .logo-container:hover .logo-icon {
            transform: rotate(5deg);
        }
        
        /* Pulse Animation */
        .pulse-glow {
            animation: pulseGlow 2s ease-in-out infinite;
        }
        
        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); }
            50% { box-shadow: 0 0 40px rgba(59, 130, 246, 0.6); }
        }
        
        /* Particle Background */
        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            top: 0;
            left: 0;
            z-index: -1;
        }
        
        .particle {
            position: absolute;
            background: #3b82f6;
            border-radius: 50%;
            opacity: 0.1;
            animation: particleFloat 10s linear infinite;
        }
        
        @keyframes particleFloat {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.1; }
            90% { opacity: 0.1; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }

        /* Dashboard specific styles */
        .dashboard-card {
            background: rgba(31, 41, 55, 0.6);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(59, 130, 246, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .dashboard-card:hover {
            border-color: rgba(59, 130, 246, 0.5);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.15);
        }
        
        .status-badge {
            font-size: 12px;
            font-weight: 600;
            padding: 4px 12px;
            border-radius: 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .status-pending {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
            border: 1px solid rgba(251, 191, 36, 0.3);
        }
        
        .status-accepted {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }
        
        .status-rejected {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .status-completed {
            background: rgba(139, 92, 246, 0.2);
            color: #8b5cf6;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }
        
        /* Modal styles */
        .modal-overlay {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
        }
        
        .modal-content {
            background: rgba(31, 41, 55, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        
        /* Custom scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(31, 41, 55, 0.3);
            border-radius: 3px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(59, 130, 246, 0.5);
            border-radius: 3px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(59, 130, 246, 0.7);
        }
    </style>
</head>
<body class="bg-gradient-animated min-h-screen text-white" style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; position: relative;">

    <!-- Particle Background -->
    <div class="particles">
        <div class="particle" style="left: 10%; width: 4px; height: 4px; animation-delay: 0s;"></div>
        <div class="particle" style="left: 20%; width: 3px; height: 3px; animation-delay: 2s;"></div>
        <div class="particle" style="left: 30%; width: 5px; height: 5px; animation-delay: 4s;"></div>
        <div class="particle" style="left: 40%; width: 2px; height: 2px; animation-delay: 6s;"></div>
        <div class="particle" style="left: 50%; width: 4px; height: 4px; animation-delay: 8s;"></div>
        <div class="particle" style="left: 60%; width: 3px; height: 3px; animation-delay: 10s;"></div>
        <div class="particle" style="left: 70%; width: 5px; height: 5px; animation-delay: 12s;"></div>
        <div class="particle" style="left: 80%; width: 2px; height: 2px; animation-delay: 14s;"></div>
        <div class="particle" style="left: 90%; width: 4px; height: 4px; animation-delay: 16s;"></div>
    </div>

    <!-- Navigation -->
    <nav class="slide-up flex justify-between items-center px-10 py-5 relative z-100" style="background: rgba(10, 10, 10, 0.9); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(59, 130, 246, 0.2);">
        <div class="logo-container flex items-center gap-3">
            <div class="pulse-glow w-11 h-11 rounded-lg flex items-center justify-center" style="background: linear-gradient(135deg, #3b82f6, #8b5cf6);">
                <svg class="logo-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" style="color: white;">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                    <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></polyline>
                </svg>
            </div>
            <span class="text-2xl font-bold text-white" style="text-shadow: 0 2px 4px rgba(0,0,0,0.3); letter-spacing: -0.5px;">PerPage</span>
        </div>
        
        <div class="flex gap-10">
            <a href="/" class="nav-link text-white no-underline font-medium text-base py-2">Home</a>
            <a href="/writers" class="nav-link text-white no-underline font-medium text-base py-2">Writers</a>
            <a href="/about" class="nav-link text-white no-underline font-medium text-base py-2">About</a>
            <a href="/dashboard" class="nav-link text-blue-400 no-underline font-medium text-base py-2">Dashboard</a>
        </div>
        
        <div class="flex gap-3 items-center">
            <% if (typeof user !== 'undefined' && user) { %>
            <span class="text-white px-5 py-3 font-medium text-base rounded-lg" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3);">Welcome, <%= user.name || user.username || 'User' %></span>
            <a href="/logout" class="text-gray-400 no-underline px-5 py-3 font-medium text-base rounded-md transition-all duration-300 hover:text-white hover:bg-gray-800">Logout</a>
            <% } else { %>
            <a href="/login" class="text-gray-400 no-underline px-5 py-3 font-medium text-base rounded-md transition-all duration-300 hover:text-white hover:bg-gray-800">Login</a>
            <a href="/register" class="btn-primary text-white px-7 py-3 rounded-lg no-underline font-semibold text-base relative z-10">Get Started</a>
            <% } %>
        </div>
    </nav>

    <!-- Header Section -->
    <section class="py-16 relative overflow-hidden">
        <!-- Background Elements -->
        <div class="absolute inset-0 opacity-10">
            <div class="absolute top-10 left-10 w-32 h-32 bg-blue-500 rounded-full filter blur-3xl"></div>
            <div class="absolute bottom-10 right-10 w-32 h-32 bg-purple-500 rounded-full filter blur-3xl"></div>
        </div>
        
        <div class="container mx-auto px-6 max-w-7xl relative z-10">
            <div class="text-center mb-12 fade-in">
                <h1 class="text-5xl font-bold text-white mb-6">
                    Your <span class="gradient-text">Dashboard</span>
                </h1>
                <p class="text-xl text-gray-300 mb-8">Manage your assignments and track progress</p>
                <div class="w-24 h-1 bg-gradient-to-r from-blue-500 to-purple-500 mx-auto rounded-full"></div>
            </div>
        </div>
    </section>

    <!-- Writer Deals Section -->
    <section class="py-12 relative">
        <div class="container mx-auto px-6 max-w-7xl relative z-10">
            <div class="slide-up mb-12">
                <h2 class="text-3xl font-bold text-white mb-8 flex items-center">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-r from-green-500 to-green-600 flex items-center justify-center mr-4">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
                        </svg>
                    </div>
                    Deals Assigned to Me (as Writer)
                </h2>
                
                <% if (writerDeals.length > 0) { %>
                    <div class="dashboard-card rounded-2xl overflow-hidden shadow-2xl">
                        <div class="overflow-x-auto custom-scrollbar">
                            <table class="w-full text-left">
                                <thead class="bg-gray-800 bg-opacity-50">
                                    <tr class="border-b border-gray-700">
                                        <th class="px-6 py-4 text-sm font-semibold text-gray-300 uppercase tracking-wider">Client</th>
                                        <th class="px-6 py-4 text-sm font-semibold text-gray-300 uppercase tracking-wider">Pages</th>
                                        <th class="px-6 py-4 text-sm font-semibold text-gray-300 uppercase tracking-wider">Price</th>
                                        <th class="px-6 py-4 text-sm font-semibold text-gray-300 uppercase tracking-wider">Status</th>
                                        <th class="px-6 py-4 text-sm font-semibold text-gray-300 uppercase tracking-wider">Files</th>
                                        <th class="px-6 py-4 text-sm font-semibold text-gray-300 uppercase tracking-wider">Action</th>
                                        <th class="px-6 py-4 text-sm font-semibold text-gray-300 uppercase tracking-wider">Final Work</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-700">
                                    <% writerDeals.forEach((deal, index) => { %>
                                        <tr class="hover-scale hover:bg-gray-800 hover:bg-opacity-30 transition-all duration-300 fade-in" style="animation-delay: <%= index * 0.1 %>s;">
                                            <td class="px-6 py-4">
                                                <div class="flex items-center">
                                                    <div class="w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-sm mr-3">
                                                        <%= (deal.userId?.name || 'N/A').charAt(0).toUpperCase() %>
                                                    </div>
                                                    <div>
                                                        <div class="text-white font-medium"><%= deal.userId?.name || 'N/A' %></div>
                                                        <div class="text-gray-400 text-sm">Client</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <span class="text-white font-semibold"><%= deal.pages %></span>
                                                <span class="text-gray-400 text-sm ml-1">pages</span>
                                            </td>
                                            <td class="px-6 py-4">
                                                <span class="text-green-400 font-bold text-lg">₹<%= deal.totalPrice %></span>
                                            </td>
                                            <td class="px-6 py-4">
                                                <span class="status-badge status-<%= deal.status %>"><%= deal.status %></span>
                                            </td>
                                            <td class="px-6 py-4">
                                                <% if (deal.signedLinks?.length > 0) { %>
                                                    <div class="flex flex-wrap gap-2">
                                                        <% deal.signedLinks.forEach((link, idx) => { %>
                                                            <a href="<%= link %>" target="_blank" download class="inline-flex items-center px-3 py-1 bg-blue-500 bg-opacity-20 text-blue-400 rounded-full text-xs font-medium hover:bg-opacity-30 transition-all duration-300">
                                                                <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                                                </svg>
                                                                File <%= idx + 1 %>
                                                            </a>
                                                        <% }) %>
                                                    </div>
                                                <% } else { %>
                                                    <span class="text-gray-500 text-sm">No files</span>
                                                <% } %>
                                            </td>
                                            <td class="px-6 py-4">
                                                <% if (deal.status === 'pending') { %>
                                                    <div class="flex gap-2">
                                                        <form action="/deal/accept/<%= deal._id %>" method="POST" style="display:inline;">
                                                            <button type="submit" class="px-4 py-2 bg-green-500 text-white rounded-lg text-sm font-semibold hover:bg-green-600 transition-all duration-300 flex items-center">
                                                                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                                                </svg>
                                                                Accept
                                                            </button>
                                                        </form>
                                                        <form action="/deal/reject/<%= deal._id %>" method="POST" style="display:inline;">
                                                            <button type="submit" class="px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-semibold hover:bg-red-600 transition-all duration-300 flex items-center">
                                                                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                                                </svg>
                                                                Reject
                                                            </button>
                                                        </form>
                                                    </div>
                                                <% } else { %>
                                                    <span class="status-badge status-<%= deal.status %>"><%= deal.status %></span>
                                                <% } %>
                                            </td>
                                            <td class="px-6 py-4">
                                                <% if (deal.status === 'accepted' && !deal.finalFileLink) { %>
                                                    <button onclick="openUploadModal('<%= deal._id %>')" class="px-4 py-2 bg-purple-500 text-white rounded-lg text-sm font-semibold hover:bg-purple-600 transition-all duration-300 flex items-center">
                                                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                                        </svg>
                                                        Upload Work
                                                    </button>
                                                <% } else if (deal.finalFileLink) { %>
                                                    <a href="<%= deal.finalFileLink %>" target="_blank" download class="inline-flex items-center px-4 py-2 bg-cyan-500 bg-opacity-20 text-cyan-400 rounded-lg text-sm font-semibold hover:bg-opacity-30 transition-all duration-300">
                                                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                                        </svg>
                                                        Download Work
                                                    </a>
                                                <% } else { %>
                                                    <span class="text-gray-500 text-sm">N/A</span>
                                                <% } %>
                                            </td>
                                        </tr>
                                    <% }) %>
                                </tbody>
                            </table>
                        </div>
                    </div>
                <% } else { %>
                    <div class="dashboard-card rounded-2xl p-12 text-center">
                        <div class="w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-r from-green-500 to-green-600 flex items-center justify-center">
                            <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-4">No Writer Assignments</h3>
                        <p class="text-gray-400 mb-6">You haven't been assigned any writing projects yet.</p>
                        <a href="/writers" class="btn-primary inline-block px-6 py-3 rounded-lg font-semibold text-white">
                            Browse Opportunities
                        </a>
                    </div>
                <% } %>
            </div>
        </div>
    </section>

    <!-- Client Deals Section -->
    <section class="py-12 relative">
        <div class="container mx-auto px-6 max-w-7xl relative z-10">
            <div class="slide-up mb-12">
                <h2 class="text-3xl font-bold text-white mb-8 flex items-center">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center mr-4">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
                        </svg>
                    </div>
                    My Deals (as Client)
                </h2>
                
                <% if (clientDeals.length > 0) { %>
                    <div class="dashboard-card rounded-2xl overflow-hidden shadow-2xl">
                        <div class="overflow-x-auto custom-scrollbar">
                            <table class="w-full text-left">
                                <thead class="bg-gray-800 bg-opacity-50">
                                    <tr class="border-b border-gray-700">
                                        <th class="px-6 py-4 text-sm font-semibold text-gray-300 uppercase tracking-wider">Writer</th>
                                        <th class="px-6 py-4 text-sm font-semibold text-gray-300 uppercase tracking-wider">Pages</th>
                                        <th class="px-6 py-4 text-sm font-semibold text-gray-300 uppercase tracking-wider">Price</th>
                                        <th class="px-6 py-4 text-sm font-semibold text-gray-300 uppercase tracking-wider">Status</th>
                                        <th class="px-6 py-4 text-sm font-semibold text-gray-300 uppercase tracking-wider">Files</th>
                                        <th class="px-6 py-4 text-sm font-semibold text-gray-300 uppercase tracking-wider">Final Work</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-700">
                                    <% clientDeals.forEach((deal, index) => { %>
                                        <tr class="hover-scale hover:bg-gray-800 hover:bg-opacity-30 transition-all duration-300 fade-in">
                                            <td class="px-6 py-4">
                                                <div class="flex items-center">
                                                    <% if (deal.writerId?.profilePic) { %>
                                                        <img class="w-12 h-12 rounded-full object-cover mr-4 border-2 border-gray-600" src="<%= deal.writerId.profilePic %>" alt="Writer Profile">
                                                    <% } else { %>
                                                        <div class="w-12 h-12 rounded-full bg-gradient-to-r from-purple-500 to-pink-600 flex items-center justify-center text-white font-bold mr-4">
                                                            <%= (deal.writerId?.name || 'N/A').charAt(0).toUpperCase() %>
                                                        </div>
                                                    <% } %>
                                                    <div>
                                                        <div class="text-white font-medium"><%= deal.writerId?.name || 'N/A' %></div>
                                                        <div class="text-gray-400 text-sm">Academic Writer</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <span class="text-white font-semibold"><%= deal.pages %></span>
                                                <span class="text-gray-400 text-sm ml-1">pages</span>
                                            </td>
                                            <td class="px-6 py-4">
                                                <span class="text-green-400 font-bold text-lg">₹<%= deal.totalPrice %></span>
                                            </td>
                                            <td class="px-6 py-4">
                                                <span class="status-badge status-<%= deal.status %>"><%= deal.status %></span>
                                            </td>
                                            <td class="px-6 py-4">
                                                <% if (deal.signedLinks?.length > 0) { %>
                                                    <div class="flex flex-wrap gap-2">
                                                        <% deal.signedLinks.forEach((link, idx) => { %>
                                                            <a href="<%= link %>" target="_blank" download class="inline-flex items-center px-3 py-1 bg-blue-500 bg-opacity-20 text-blue-400 rounded-full text-xs font-medium hover:bg-opacity-30 transition-all duration-300">
                                                                <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                                                </svg>
                                                                File <%= idx + 1 %>
                                                            </a>
                                                        <% }) %>
                                                    </div>
                                                <% } else { %>
                                                    <span class="text-gray-500 text-sm">No files</span>
                                                <% } %>
                                            </td>
                                            <td class="px-6 py-4">
                                                <% if (deal.finalFileLink) { %>
                                                    <a href="<%= deal.finalFileLink %>" target="_blank" download class="inline-flex items-center px-4 py-2 bg-cyan-500 bg-opacity-20 text-cyan-400 rounded-lg text-sm font-semibold hover:bg-opacity-30 transition-all duration-300">
                                                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                                        </svg>
                                                        Download Work
                                                    </a>
                                                <% } else { %>
                                                    <span class="text-gray-500 text-sm">Not uploaded yet</span>
                                                <% } %>
                                            </td>
                                        </tr>
                                    <% }) %>
                                </tbody>
                            </table>
                        </div>
                    </div>
                <% } else { %>
                    <div class="dashboard-card rounded-2xl p-12 text-center">
                        <div class="w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center">
                            <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-4">No Assignments Posted</h3>
                        <p class="text-gray-400 mb-6">You haven't posted any assignments yet. Get started by posting your first assignment.</p>
                        <a href="/writers" class="btn-primary inline-block px-6 py-3 rounded-lg font-semibold text-white">
                            Post Assignment
                        </a>
                    </div>
                <% } %>
            </div>
        </div>
    </section>

    <!-- Modal Popup Form -->
    <div id="uploadModal" class="hidden fixed inset-0 modal-overlay flex justify-center items-center z-50">
        <div class="modal-content rounded-2xl p-8 m-4 max-w-md w-full shadow-2xl">
            <div class="text-center mb-6">
                <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-purple-500 to-purple-600 flex items-center justify-center">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                    </svg>
                </div>
                <h3 class="text-2xl font-bold text-white mb-2">Upload Final Work</h3>
                <p class="text-gray-400">Upload your completed assignment file</p>
            </div>
            
            <form id="uploadForm" method="POST" action="/deal/upload-final" enctype="multipart/form-data" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Select PDF File</label>
                    <div class="relative">
                        <input type="file" name="finalPdf" accept="application/pdf" required class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-blue-500 file:text-white file:font-medium hover:file:bg-blue-600 transition-all duration-300">
                    </div>
                </div>
                
                <input type="hidden" name="dealId" id="modalDealId">
                
                <div class="flex gap-4">
                    <button type="submit" class="flex-1 bg-gradient-to-r from-purple-500 to-purple-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-purple-600 hover:to-purple-700 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                        </svg>
                        Upload
                    </button>
                    <button type="button" onclick="closeUploadModal()" class="flex-1 bg-gray-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-gray-700 transition-all duration-300">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer Section -->
    <footer class="bg-gray-900 pt-12 pb-6 relative z-10 border-t border-gray-800">
        <div class="container mx-auto px-6 max-w-6xl">
            <div class="flex flex-col md:flex-row justify-between items-center mb-8">
                <div class="flex items-center gap-3 mb-4 md:mb-0">
                    <div class="w-10 h-10 rounded-lg bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" style="color: white;">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                            <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></polyline>
                        </svg>
                    </div>
                    <span class="text-xl text-white tracking-tight font-bold">PerPage</span>
                </div>
                <div class="flex flex-wrap gap-6 justify-center">
                    <a href="/" class="text-white hover:text-blue-400 transition-colors duration-200">Home</a>
                    <a href="/about" class="text-white hover:text-blue-400 transition-colors duration-200">About Us</a>
                    <a href="/writers" class="text-white hover:text-blue-400 transition-colors duration-200">Writers</a>
                    <a href="/dashboard" class="text-blue-400">Dashboard</a>
                </div>
            </div>
            <div class="border-t border-gray-700 pt-6 mt-6 text-center">
                <p class="text-sm text-gray-400">&copy; 2025 PerPage. Academic project for demonstration only.</p>
                <div class="flex flex-wrap justify-center gap-4 mt-2">
                    <span class="text-xs text-gray-500">Made with <svg class="w-3 h-3 text-blue-400 inline" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M20.8 6.6c-1.1-2.1-3.6-2.6-5.2-1.1l-1.6 1.5-1.6-1.5c-1.6-1.5-4.1-1-5.2 1.1-1.1 2.1-0.2 4.3 1.2 5.7l5.6 5.5 5.6-5.5c1.4-1.4 2.3-3.6 1.2-5.7z"/></svg> for students</span>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Initialize page animations
        document.addEventListener('DOMContentLoaded', function() {
            // Add staggered animation delays for table rows
            const fadeElements = document.querySelectorAll('.fade-in');
            fadeElements.forEach((el, index) => {
                el.style.animationDelay = `${index * 0.1}s`;
            });
            
            // Add smooth scroll behavior
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
            
            console.log('🚀 Dashboard loaded successfully!');
        });
        
        // Modal functions
        function openUploadModal(dealId) {
            document.getElementById('modalDealId').value = dealId;
            document.getElementById('uploadModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
        
        function closeUploadModal() {
            document.getElementById('uploadModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }
        
        // Close modal when clicking outside
        document.getElementById('uploadModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeUploadModal();
            }
        });
        
        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeUploadModal();
            }
        });
    </script>

</body>
</html>